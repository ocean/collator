<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs ––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>Collator - gets the news</title>
  <meta name="author" content="Drew Robinson">

  <!-- Mobile Specific Metas –––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT ––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

  <!-- CSS –––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="css/dist/normalize.css">
  <link rel="stylesheet" href="css/dist/skeleton.css">
  <style>
    .disabled {
      color: lightgrey;
    }
    .disabled a {
      color: lightgrey;
    }
  </style>

  <!-- Favicon -––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="images/favicon.png">

</head>
<body>

  <!-- Primary Page Layout –––––––––––––––––––––––––––––– -->
  <div class="container">
    <div class="row">
      <div class="eight column" style="margin-top: 10%">
        <h1>Collator &ndash; fetches and organises</h1> 
        <p><strong>Collator</strong> is an API that collects and collates information from various sources and serves it as JSON, with varying amounts of caching.</p>
        <h3>Usage</h3>
        <p>Simply the hit the endpoints below. Data is plain JSON by default.</p>
        <!-- <p>Simply the hit the endpoints below to get data. Data is plain JSON by default. JSONP can be requested by adding a <code>?callback=yourCallbackFunctionNameHere</code> query parameter to the URL.</p> -->
        <h3>API endpoints</h3>
        <p><strong>Note:</strong> <span class="disabled">greyed out</span> endpoints are not fully implemented yet.</p>
        <table class="u-full-width">
          <thead>
            <tr>
              <th>URL</th>
              <th>Data provided</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code><a href="/api/v1/statements/commerce">/api/v1/statements/commerce</a></code></td>
              <td>Commerce media statements from the <a href="https://www.commerce.wa.gov.au/announcements?title=&field_announcement_type_tid=182">Commerce site</a>.</td>
            </tr>
            <tr>
              <td><code><a href="/api/v1/statements/ministerials">/api/v1/statements/ministerials</a></code></td>
              <td>Ministerial media statements from the WA Govt Media Statements site - the <a href="https://www.mediastatements.wa.gov.au/Pages/Portfolios/Mines-and-Petroleum.aspx">Mines and Petroleum</a> and <a href="https://www.mediastatements.wa.gov.au/Pages/Portfolios/Commerce-and-Industrial-Relations.aspx">Commerce and Industrial Relations</a> portfolios.</td>
            </tr>
            <tr>
              <td><code><a href="/api/v1/statements/government">/api/v1/statements/government</a></code></td>
              <td>All Government media statements from the <a href="https://www.mediastatements.wa.gov.au/">Media Statements site</a>.</td>
            </tr>
            <tr>
              <td><code><a href="/api/v1/intranet/news">/api/v1/intranet/news</a></code></td>
              <td>
                <p>News items (currently all of them) from the <a href="http://intranet.dias94.bedrock.mft.wa.gov.au/">new Intranet</a>.</p>
                </td>
            </tr>
            <tr>
              <td><code><a href="/api/v1/intranet/news/type/commerce-news">/api/v1/intranet/news/type/{newsType}</a></code></td>
              <td>
                <p>News items, filtered by type, from the <a href="http://intranet.dias94.bedrock.mft.wa.gov.au/">new Intranet</a>.
                </p>
                <p>The newsType parameter can be any term from the News article "News type" taxonomy, downcased and dash-spaced. e.g.:
                    <ul>
                      <li>"Commerce News" -> <code>/commerce-news</code></li>
                      <li>"Corporate Executive News" -> <code>/corporate-executive-news</code></li>
                      <li>"My Employment News" -> <code>/my-employment-news</code></li>
                    </ul>
                  </p>
                  <p>There is also an optional <code>/withImages</code> parameter, which will restrict the results to news items of the requested type that have images attached.</p>
                  <p>
                    e.g. <code><a href="/api/v1/intranet/news/type/commerce-news/withImages">/api/v1/intranet/news/type/commerce-news/withImages</a></code>
                  </p>
              </td>
            </tr>
            <tr>
              <td><code><a href="/api/v1/combined">/api/v1/combined</a></code></td>
              <td>
                <p>Returns a special "combined" feed especially for the Intranet News Centre, which is formatted as an array of arrays of objects. Each child array contains a specific, currently-hardcoded number of combined news items, ready for rendering as newspaper-like panels of items.</p>
                <p>Currently each child array contains:
                  <ul>
                    <li>2 &times; Commerce media statements</li>
                    <li>1 &times; Intranet news article</li>
                    <li>2 &times; Ministerial media statements</li>
                    <li>2 &times; DMIRS Twitter updates</li>
                  </ul>
                </p>
              </td>
            </tr>
            <tr>
              <td><code><a href="/api/v1/tweets/dmirs">/api/v1/tweets/dmirs</a></code></td>
              <td>Twitter updates from <a href="https://twitter.com/DMIRS_WA">@DMIRS_WA</a> and related accounts.</td>
            </tr>
            <tr>
              <td><code><a href="/api/v1/tweets/transport">/api/v1/tweets/transport</a></code></td>
              <td>Twitter updates about Perth transport information, including <a href="https://twitter.com/Transperth">@Transperth</a> and <a href="https://twitter.com/Perth_Traffic">@Perth_Traffic</a>.</td>
            </tr>
            <tr>
              <td><code><a href="/api/v1/data/transport/departures/perth">/api/v1/data/transport/departures/{location}</a></code></td>
              <td>
                <p>Train departures information from <a href="http://www.transperth.wa.gov.au/Timetables/Live-Train-Times">Transperth live train times</a>.</p>
                <p><code>location</code> must be either <code>perth</code> or <code>cannington</code>.</p>
              </td>
            </tr>
            <tr>
              <td><code><a href="/api/v1/data/transport/updates">/api/v1/data/transport/updates</a></code></td>
              <td>Train service updates from <a href="http://www.transperth.wa.gov.au/Service-Updates/Train-Updates">Transperth train updates</a>.</td>
            </tr>
            <!--<tr>
              <td><code><a href="/api/v1/data/weather/">/api/v1/data/weather/{location}</a></code></td>
              <td>Current weather data for various locations from the <a href="http://www.bom.gov.au/places/wa/perth/">Bureau of Meteorology</a>.</td>
            </tr> -->
          </tbody>
        </table>
      </div>
    </div>
  </div>

<!-- End Document ––––––––––––––––––––––––––––––––––––––– -->
</body>
</html>
